# Exemple de profil de service
# Copier ce fichier et l'adapter pour chaque nouveau service
# Emplacement : profiles/<nom-service>.yml

# ============================================
# INFORMATIONS DU SERVICE
# ============================================
name: example-service
description: "Service exemple pour démonstration"
enabled: false  # false pour désactiver le service sans supprimer le profil
always_active: false  # Si true, démarré automatiquement sans --profile
docker_profile: example  # Nom du profil Docker (ou null si always_active)

# ============================================
# CONFIGURATION DOCKER
# ============================================
docker-compose:
  image: ${EXAMPLE_IMAGE:-nginx:latest}
  container_name: example-service
  ports:
    - "8090:80"
  environment:
    - ENV_MODE=docker
    - SERVICE_NAME=example
    - EXAMPLE_API_KEY=${EXAMPLE_API_KEY:-default-key}
  healthcheck:
    test: ["CMD", "curl", "-f", "http://localhost:80/"]
    interval: 30s
    timeout: 5s
    retries: 3
    start_period: 10s

# ============================================
# CONFIGURATION TRAEFIK
# ============================================
traefik:
  # Activer l'intégration Traefik
  enabled: true
  
  # Préfixe de route (ex: /example -> http://localhost/example)
  prefix: /example
  
  # Supprimer le préfixe avant de transmettre au service
  strip_prefix: true
  
  # Port du service à exposer via Traefik
  port: 80
  
  # Priorité de la route (optionnel, défaut: 10)
  priority: 10
  
  # Middlewares additionnels (optionnel)
  # middlewares:
  #   - auth
  #   - compress

# ============================================
# SECRETS (optionnel)
# ============================================
# Variables de secrets requises (à définir dans secrets.env)
secrets:
  - name: EXAMPLE_API_KEY
    description: "Clé API pour le service exemple"
    default: default-key

# ============================================
# MÉTADONNÉES (optionnel)
# ============================================
metadata:
  # Catégorie du service
  category: web
  
  # Tags pour filtrage
  tags:
    - example
    - demo
  
  # Documentation
  docs_url: https://nginx.org/en/docs/
  
  # Mainteneur
  maintainer: team@example.com
